# Migration `20200808075917-models-event-location-seat`

This migration has been generated by dohaicuong at 8/8/2020, 5:59:18 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "Event" (
"id" TEXT NOT NULL,
"title" TEXT NOT NULL,
"time" DATETIME NOT NULL,
"image" TEXT NOT NULL,
"locationId" TEXT NOT NULL,
PRIMARY KEY ("id"),
FOREIGN KEY ("locationId") REFERENCES "Location"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE TABLE "Location" (
"id" TEXT NOT NULL,
"city" TEXT NOT NULL,
"state" TEXT NOT NULL,
"country" TEXT NOT NULL,
PRIMARY KEY ("id"))

CREATE TABLE "Seat" (
"id" TEXT NOT NULL,
PRIMARY KEY ("id"))

CREATE TABLE "_EventToSeat" (
"A" TEXT NOT NULL,
"B" TEXT NOT NULL,
FOREIGN KEY ("A") REFERENCES "Event"("id") ON DELETE CASCADE ON UPDATE CASCADE,

FOREIGN KEY ("B") REFERENCES "Seat"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE UNIQUE INDEX "_EventToSeat_AB_unique" ON "_EventToSeat"("A","B")

CREATE  INDEX "_EventToSeat_B_index" ON "_EventToSeat"("B")

PRAGMA foreign_keys=off;
DROP TABLE "World";;
PRAGMA foreign_keys=on

PRAGMA foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200808075545-init..20200808075917-models-event-location-seat
--- datamodel.dml
+++ datamodel.dml
@@ -1,14 +1,31 @@
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url = "***"
 }
 generator prisma_client {
   provider = "prisma-client-js"
 }
-model World {
-  id         Int    @id @default(autoincrement())
-  name       String @unique
-  population Float
-}
+model Event {
+  id             String   @id @default(cuid())
+  title          String
+  time           DateTime
+  image          String
+  location       Location @relation(fields: [locationId], references: [id])
+  locationId     String
+  availableSeats Seat[]
+}
+
+model Location {
+  id      String  @id @default(cuid())
+  city    String
+  state   String
+  country String
+  Event   Event[]
+}
+
+model Seat {
+  id    String  @id @default(cuid())
+  event Event[]
+}
```


